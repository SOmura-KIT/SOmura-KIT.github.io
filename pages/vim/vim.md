# Vim/Neovim

## これからVimを使用する人に向けて
Vimは非常に強力なテキストエディタである。
Vimを習得するまでには、それなりの時間を要する。
それまでは、思い通りに動かない歯痒さを我慢しなければならない。
Vimの操作が手癖になる頃には、他のエディタにはもう戻れないだろう。

最初からVim(Neovim)を選択することは悪くは無いが、VSCodeのVim拡張を使用することをおすすめする。
初心者が陥りがちなVimから出られない問題を回避できる上、VSCodeの強力な機能を簡単に使用できる。
また、可能ならばキー配列をUSにするといいだろう。キー配列を覚え直さなければならないが、こちらの方がVimとの親和性が良い。

## Vim Tutor by Somura
Vimには、vimtutorという初心者向けのコマンドが付属している。
最初はこれで学習するのが良いだろう。

この記事では、私の個人的に良いと思う取得の順序を示す。
幾つかのステップで分けるが、それぞれのステップの範囲を感覚的に出来るようになってから次のステップへ行くと良いだろう。

### Step0 Vimの概念を知る1
Step0では、Vimのモードについてだ。

このモードという概念がVimの独特なもので、敷居を上げている要因だろう。
以下に一部のモードを示す。

|モード|概要|
|---|:-:|
|normal|カーソルの移動、削除(厳密には削除では無い)など|
|insert|テキストの入力|
|visual|範囲選択|
|command|コマンドを入力、VSCodeやIDEなどの左上の"ファイル"や"編集"などに近い|

他にも、replaceモード等あるが、とりあえずは以上のもので十分である。

以下全てにおいて、モードをそれぞれ、n, i, v, cと省略する上、コマンドモードは":command"のように:から始まる。
また、Ctrlキーと他のキーの組み合わせをC-a(Ctrlを押しながらaの場合)、SHIFTキーと他のキーはAのように大文字と小文字を区別する。

何となく理解したら次のStepへ進もう。

### Step1 テキストを入力してVimから出られるようになる
Step1では、最低限の操作だ。

ここでは、Vimを使用してテキストを入力した後、保存して終了するまでを覚える。
本章で登場するキーは以下だ。

|モード|キー|概要|
|---|---|:-:|
|どこでも|**Esc**|normalモードへ移行|
|どこでも|**C-c**|Escより強い|
|n|h|カーソルを左へ移動|
|n|j|カーソルを下へ移動|
|n|k|カーソルを上へ移動|
|n|l|カーソルを右へ移動|
|n|i|insertモードへ移行|
|n|:|commandモードへ移行|
|c|:w|保存|
|c|:q|終了。ただし1回でも文字の入力、削除を行うと不可|
|c|:q!|強制終了。未保存分は破棄|
|c|:wq|保存して終了|

h, j, k, lで移動して、目的の位置でiを押してinsertモードに入る。必要分入力したら、Escキーでnormalモードへ戻る。そして、:でcommandモードへ入り、wqとして保存&終了。
また、困ったら基本的にEscキーを押してnormalモードに戻る。

これを出来るようになれば、Vimから出られなくなって困ることはないだろう。
チートシートを見なくとも出来るようになったならば、次のステップへ進もう。

### Step2 normalモードを少しましにする
Step2では、normalモードの移動を改善する。

基本は、Step1が全てである。ただし、h, j, k, lでの移動は連打が必要で少し不便だ。
私もそうであったが、始めてVimを触るとき、h, j, k, lでの印象が強い。
しかし、Vimに慣れるにつれ、このキーの入力が減る。
以下のStepの多くが、h, j, k, lを減らすためのトリックとなる。

このStep2では、1キーの入力での移動を少しだけ多きくしてみる。
そのためのキーが以下だ。

|モード|キー|概要|
|---|---|:-:|
|n|w|次の単語の先頭|
|n|b|前の単語の先頭|
|n|e|次の単語の末尾|

とりあえず3つのコマンドだ。

もう一つ覚えておいて欲しいことがある。それはキーの入力数である。
"HelloWorld"を"HelloWorkd"と入力してしまった。今キーはHの位置にあり、kをlに書き換えたい。
このとき、lを8回連打してkの位置まで移動するのか。それよりもっと良い方法があるeとhを順番に押すのだ。
これなら6キー省略出来る。
このような移動の組み合わせで如何にして、少ない入力で目的を達成するか。それがVimにおいて大切なことである。

さて、これで不必要なキーの連打が減らせたら、次のStepへ進もう。
